% !TEX root = phd-thesis.tex

%%%%%%%%%%%%%%%%%%%% COMMANDS
\DeclarePairedDelimiter{\denot}{\llbracket}{\rrbracket}
\DeclarePairedDelimiter{\edenot}{\llparenthesis}{\rrparenthesis}
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}

\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\labelitem}[1]{\item[] \textit{#1}:}
\newcommand{\Var}{\text{Var}}
\newcommand{\proofcase}[1]{\noindent \textbf{Case} #1\newline}
\newcommand{\wlp}{\textbf{wlp}}
\newcommand{\notimplies}{\mathrel{{\ooalign{\hidewidth$\not\phantom{=}$\hidewidth\cr$\Rightarrow$}}}}

\definecolor[named]{ACMBlue}{cmyk}{1,0.1,0,0.1}
\definecolor[named]{ACMPurple}{cmyk}{0.55,1,0,0.15}

\newcommand{\fromhere}{\todo[inline]{From here}}

%%%%%%%%%%%%%%%%%%%% THEOREMS
\declaretheorem[numberwithin=chapter]{theorem}
\declaretheorem[sibling=theorem]{corollary}
\declaretheorem[sibling=theorem]{lemma}
\declaretheorem[title=Proposition,sibling=theorem]{prop}
\declaretheorem[style=definition,sibling=theorem]{definition}
\declaretheorem[title=Assumption,style=definition,sibling=theorem]{assump}
\declaretheorem[style=remark,sibling=theorem,qed=$\blacksquare$]{example}
\declaretheorem[style=remark,sibling=theorem]{remark}

%%%%%%%%%%%%%%%%%%%% MATH SYMBOLS
\newcommand{\setN}{\mathbb{N}}
\newcommand{\setZ}{\mathbb{Z}}
\newcommand{\katR}{\mathcal{R}}
\newcommand{\svert}{\,\vert\,}
\newcommand{\sdot}{\,.\,}
\newcommand{\pow}{\mathcal{P}}
\newcommand{\expe}{\mathsf{e}}
\newcommand{\regr}{\mathsf{r}}
\newcommand{\regc}{\mathsf{c}}
%\newcommand{\regw}{\mathsf{w}}
\newcommand{\Reg}{\mathsf{Reg}}
\newcommand{\Imp}{\mathsf{Imp}}
\newcommand{\Exp}{\mathsf{Exp}}
\newcommand{\regtimes}{\otimes}
\newcommand{\regplus}{\oplus}
\newcommand{\kstar}{\star}
\newcommand{\eqdef}{\triangleq}
\newcommand{\macheps}{\textbf{u}}

%%%%%%%%%%%%%%%%%%%% ORDER-THEORETIC SYMBOLS
\newcommand{\fix}{\text{fix}}
\newcommand{\id}{\text{id}}
\newcommand{\lfp}{\text{lfp}}
\newcommand{\gfp}{\text{gfp}}
\newcommand{\op}{\text{op}}
\newcommand{\image}{\text{Im}}

%%%%%%%%%%%%%%%%%%%% ABSINT
\newcommand{\Abs}{\text{\normalfont Abs}}
\newcommand{\gc}[4]{\langle #1 \mathrel{\substack{#3 \\ \leftrightarrows \\ #2}} #4\rangle}
\newcommand{\gi}[3]{\gc{#1}{#2}{\phantom{\gamma}}{#3}}
\newcommand{\complete}[3]{\mathbb{C}^{#1}_{#2}(#3)}
\newcommand{\Sign}{\mathsf{Sign}}
\newcommand{\Int}{\text{Int}}
\newcommand{\Oct}{\text{Oct}}
\newcommand{\Poly}{\mathsf{Poly}}
\newcommand{\Moore}{\mathcal{M}}
\newcommand{\Div}{\mathsf{Div}}
%\newcommand{\poly}{\text{poly}}
%\newcommand{\macheps}{\textbf{u}}
%\newcommand{\fp}{\text{fp}}
\newcommand{\ugc}[4]{\gc{#1}{#3}{#2}{#4}}
\newcommand{\ugi}[3]{\ugc{#1}{#2}{\phantom{\gamma}}{#3}}
\newcommand{\concat}{\text{concat}}
\newcommand{\dropp}{\text{drop}}

%%%%%%%%%%%%%%%%%%%% Logics (HL, IL, LCL, NC, SIL)
\makeatletter
\newsavebox{\@brx}
\newcommand{\llangle}[1][]{\savebox{\@brx}{\(\m@th{#1\langle}\)}%
	\mathopen{\copy\@brx\mkern2mu\kern-1\wd\@brx\usebox{\@brx}}}
\newcommand{\rrangle}[1][]{\savebox{\@brx}{\(\m@th{#1\rangle}\)}%
	\mathclose{\copy\@brx\mkern2mu\kern-1\wd\@brx\usebox{\@brx}}}
\makeatother

\newcommand{\ilexact}[1]{\ensuremath{[#1]}}
\newcommand{\hlexact}[1]{\ensuremath{\{#1\}}}
\newcommand{\ncexact}[1]{\ensuremath{(#1)}}
\newcommand{\silexact}[1]{\ensuremath{\llangle #1 \rrangle}}
\newcommand{\iltriple}[3]{\ilexact{#1}~#2~\ilexact{#3}}
\newcommand{\hltriple}[3]{\hlexact{#1}~#2~\hlexact{#3}}
\newcommand{\nctriple}[3]{\ncexact{#1}~#2~\ncexact{#3}}
\newcommand{\siltriple}[3]{\silexact{#1}~#2~\silexact{#3}}
\newcommand{\oltriple}[3]{\langle {#1}\rangle~#2~\langle{#3}\rangle}
\newcommand{\silrule}[1]{\ensuremath{\llangle\mathsf{#1}\rrangle}}
\newcommand{\ilrule}[1]{[{\ensuremath{\mathsf{#1}}}]}
\newcommand{\hlrule}[1]{\{{\ensuremath{\mathsf{#1}}}\}}
\newcommand{\olrule}[1]{\ensuremath{\langle\mathsf{#1}\rangle}}
\newcommand{\bdiamond}[1]{\langle #1 \vert}
\newcommand{\spost}{\textbf{sp}}
\newcommand{\test}{\text{test}}
\newcommand{\lcl}[4]{\vdash_{#1}\nobreak\iltriple{#2}{#3}{#4}}
\newcommand{\lclvalid}[4]{\vDash_{#1}\nobreak\iltriple{#2}{#3}{#4}}
\newcommand{\lclrule}[1]{(\ensuremath{\mathsf{#1}})}
\newcommand{\LCLA}{\text{LCL}_A}
\newcommand{\clcltriple}[4]{\vdash_{#1}\nobreak\siltriple{#2}{#3}{#4}}
\newcommand{\clclrule}[1]{\lclrule{#1}}

\newcommand{\oktext}[1]{\textcolor{teal}{#1}}
\newcommand{\ertext}[1]{\textcolor{red}{#1}}
\newcommand{\okflag}{\oktext{ok}}
\newcommand{\erflag}{\ertext{er}}

%%%%%%%%%%%%%%%%%%%% SL
\newcommand{\Regh}{\mathsf{HRCmd}}
\newcommand{\Cmdh}{\mathsf{HACmd}}
\newcommand{\Loc}{\text{Loc}}
\newcommand{\Val}{\text{Val}}
\newcommand{\Stores}{\text{Store}}
\newcommand{\Heaps}{\text{Heap}}
\newcommand{\dom}{\text{dom}}
\newcommand{\errstate}{\textbf{err}}
\newcommand{\modified}{\text{mod}}
\newcommand{\dotsim}{\dot\sim}
\newcommand{\Asl}{\text{Asl}}
\newcommand{\emp}{\textbf{emp}}
\newcommand{\andsep}{*}
%\newcommand{\asldenot}[1]{\edenot{#1}}
\newcommand{\asldenot}[1]{\{\hspace{-2pt}|#1|\hspace{-2pt}\}}
\newcommand{\fv}{\text{fv}}
\newcommand{\dealloc}{\not\mapsto{}}

%%%%%%%%%%%%%%%%%%%% Semantics
\newcommand{\fwsem}[1]{\denot{#1}}
\newcommand{\bwsem}[1]{\denot{\overleftarrow{#1}}}
\newcommand{\barsigma}{\bar{\sigma}}
\newcommand{\AExp}{\mathsf{AExp}}
\newcommand{\BExp}{\mathsf{BExp}}

%%%%%%%%%%%%%%%%%%%% PDR
\newcommand{\xbar}{\overline{x}}
\newcommand{\clause}{\text{clause}}
\newcommand{\states}{\mathcal{S}}
\newcommand{\true}{\textbf{true}}
\newcommand{\false}{\textbf{false}}
\newcommand{\timplies}{\Rightarrow}

\def\APDR{\texorpdfstring{\textnormal{\texttt{AdjointPDR}}}{AdjointPDR}}
\def\ADPDR{\texorpdfstring{{\textnormal{\texttt{AdjointPDR}}$^\downarrow$}}{AdjointPDR↓}}
\def\APDRAI{\texorpdfstring{{\textnormal{\texttt{AdjointPDR}}$^\texttt{AI}$}}{AdjointPDR(AI)}}
\newcommand{\Li}{L_{i \uparrow}}

\newcommand{\rloop}[2][-]{\save \POS!R(.7) \ar@(ru,rd)^#1{#2} \restore}
\newcommand{\lloop}[2][-]{\save \POS!L(.7) \ar@(lu,ld)_#1{#2} \restore}
\newcommand{\uloop}[2][-]{\save \POS!U(.7) \ar@(lu,ru)^(.8){#2} \restore}

\newcommand{\tr}[1]{\stackrel{#1}{\to}}
\newcommand{\trz}[2]{{\stackrel{#1}{\to}}_{#2}}
\newcommand{\Htrz}[3]{{\stackrel{#1}{\to}}_{#2}^{#3}}
\newcommand{\ttr}[1]{\stackrel{#1}{\to^*}}
\newcommand{\ttp}[1]{\stackrel{#1}{\to^+}}

\definecolor{dkblue}{rgb}{0,0.1,0.6}
\definecolor{dkgreen}{rgb}{0,0.35,0}
\definecolor{dkviolet}{rgb}{0.3,0,0.5}
\definecolor{dkred}{rgb}{0.5,0,0}
\lstdefinelanguage{NT}{
% Anything betweeen $ becomes LaTeX math mode
mathescape=true,
% Comments may or not include Latex commands
texcl=false,
%
morekeywords=[1]{while, do, if, then, else, for, all},
%
morekeywords=[2]{return, continue, goto},
% Comments delimiters
morecomment=[s]{/*}{*/},
% Spaces are not displayed as a special character
showstringspaces=false,
% String delimiters
morestring=[b]",
morestring=[d],
% Size of tabulations
tabsize=3,
% Enables ASCII chars 128 to 255
extendedchars=false,
% Case sensitivity
sensitive=true,
% Automatic breaking of long lines
breaklines=false,
% Default style fors listings
%basicstyle=\ttfamily\scriptsize,
basicstyle=\ttfamily,
% Position of captions is bottom
captionpos=b,
% fixed columns
columns=[l]fixed,
% Style for (listings') identifiers
identifierstyle={\color{black}},
% Style for keywords
keywordstyle=[1]{\color{dkviolet}},
keywordstyle=[2]{\color{dkred}},
% Style for strings
stringstyle=\ttfamily,
% Style for comments
commentstyle={\ttfamily\color{dkblue}},
%moredelim=**[is][\ttfamily\color{red}]{/&}{&/},
literate=
	{true}{{{\color{dkgreen}$true$}}}3
{false}{{{\color{dkgreen}$false$}}}4
{choose}{{{\color{dkred}choose}}}6
{st}{{{\color{dkred}such that}}}{9}
{And}{{{\color{dkgreen}$and$}}}4
{case}{{{\color{dkviolet}case}}}4
{of}{{{\color{dkviolet}of}}}3
{endcase}{{{\color{dkviolet}endcase}}}3
% {<-}{{$\leftarrow\;$}}1
% {=>}{{$\Rightarrow\;$}}1
}[keywords,comments,strings]
\lstnewenvironment{codeNT}{\lstset{language=NT}}{}
